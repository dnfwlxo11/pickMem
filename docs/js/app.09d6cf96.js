(function(t){function e(e){for(var a,i,c=e[0],o=e[1],l=e[2],u=0,f=[];u<c.length;u++)i=c[u],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&f.push(r[i][0]),r[i]=0;for(a in o)Object.prototype.hasOwnProperty.call(o,a)&&(t[a]=o[a]);m&&m(e);while(f.length)f.shift()();return n.push.apply(n,l||[]),s()}function s(){for(var t,e=0;e<n.length;e++){for(var s=n[e],a=!0,c=1;c<s.length;c++){var o=s[c];0!==r[o]&&(a=!1)}a&&(n.splice(e--,1),t=i(i.s=s[0]))}return t}var a={},r={app:0},n=[];function i(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=a,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(s,a,function(e){return t[e]}.bind(null,a));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="../pickMem/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],o=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var m=o;n.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"0365":function(t,e,s){"use strict";s("0b94")},"0913":function(t,e,s){},"0b94":function(t,e,s){},"0e4a":function(t,e,s){},1:function(t,e){},"18e4":function(t,e,s){"use strict";s("7692")},"1ff5":function(t,e,s){},2:function(t,e){},"20e7":function(t,e,s){"use strict";s("a273")},2273:function(t,e,s){"use strict";s("0913")},3:function(t,e){},"341b":function(t,e,s){},"4ce1":function(t,e,s){"use strict";s("d414")},"54c6":function(t,e,s){"use strict";s("341b")},"56d7":function(t,e,s){"use strict";s.r(e);s("e260"),s("e6cf"),s("cca6"),s("a79d");var a=s("2b0e"),r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("router-view")],1)},n=[],i=(s("5c0b"),s("2877")),c={},o=Object(i["a"])(c,r,n,!1,null,null,null),l=o.exports,m=s("8c4f"),u=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"home h-100"},[s("div",{staticClass:"container h-100"},[s("main-page",{staticClass:"h-100"})],1)])},f=[],g=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"main-page d-flex justify-content-center align-items-center"},[s("div",{staticClass:"text-center"},[s("div",{staticClass:"title"},[t._m(0),t._m(1),s("button",{staticClass:"btn btn-outline-primary",on:{click:function(e){t.init(),t.$router.push("/pickMem")}}},[t._v("시 작 하 기")])])])])},d=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("strong",[t._v("Pick The Memory")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mb-3"},[s("small",[t._v("지금 이 순간을 영원히 기억할 수 있어요.")])])}],v={name:"MainPage",mounted:function(){this.init()},methods:{init:function(){this.$store.commit("setFrame",null),this.$store.commit("setFrameImg",null),this.$store.commit("setCanvas",null),this.$store.commit("setImages",{}),this.$store.commit("setTargets",{}),this.$store.commit("setTmpTargets",{}),this.$store.commit("setImgCanvas",{}),this.$store.commit("setUpdateQueue",[])}}},h=v,p=(s("dd3d"),Object(i["a"])(h,g,d,!1,null,"651ba9e4",null)),b=p.exports,C={name:"Home",components:{mainPage:b}},w=C,k=Object(i["a"])(w,u,f,!1,null,null,null),x=k.exports,_=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"pick-mem"},[s("div",{staticClass:"content"},[s("nav-bar",{attrs:{msg:t.msg[t.step]},on:{"on-next":t.nextStep,"on-previous":t.previousStep}}),s("div",[s("div",{staticClass:"container"},[0==t.step?s("step-one"):1==t.step?s("step-two"):2==t.step?s("step-three"):3==t.step?s("step-four"):4==t.step?s("step-five"):s("step-result",{on:{"on-previous":t.previousStep}})],1)])],1),s("footer-bar",{staticClass:"footer"})],1)},$=[],y=(s("b64b"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"nav"},[s("div",{staticClass:"text-center mt-auto mb-auto w-100"},[s("div",{staticClass:"row m-0 p-0"},[s("div",{staticClass:"col-2"},[s("i",{staticClass:"mdi mdi-chevron-left",on:{click:function(e){return t.$emit("on-previous")}}})]),s("div",{staticClass:"col-8"},[s("div",{staticClass:"title"},[s("strong",[t._v(t._s(t.msg))])])]),s("div",{staticClass:"col-2"},[s("i",{staticClass:"mdi mdi-chevron-right",on:{click:function(e){return t.$emit("on-next")}}})])]),s("hr")])])}),I=[],F={name:"Nav",props:{msg:{type:String,default:"Pick the Moment"}}},T=F,O=(s("b308"),Object(i["a"])(T,y,I,!1,null,"a1233cba",null)),S=O.exports,j=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"footer"},[s("div",{staticClass:"w-100"},[s("hr"),s("div",{staticClass:"title mt-auto mb-auto text-center"},[s("strong",[t._v(t._s(t.msg))])])])])},E=[],A={name:"Footer",props:{msg:{type:String,default:"안녕하세요."}}},N=A,P=(s("95a7"),Object(i["a"])(N,j,E,!1,null,"0677f5d7",null)),M=P.exports,R=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"step-one text-center"},[s("div",{staticClass:"mb-5 badge",staticStyle:{"font-size":"25px"}},[s("small",[t._v("프레임: "+t._s(t.targetFrame?t.targetFrame:"선택 안함"))])]),s("div",{staticClass:"mb-5"},[s("div",{staticClass:"text-left"},[t._m(0),s("div",{staticClass:"mb-5 text-center"},[s("div",{staticClass:"row m-0"},[s("div",{staticClass:"col-md-6 mb-3 p-3 m-auto",class:{target:"1x2"==t.targetFrame}},[s("img",{staticClass:"frame-vertical",attrs:{src:"/frame_sample/1_2.png",draggable:"false"},on:{click:function(e){return t.selectFrame("1x2")}}})]),s("div",{staticClass:"col-md-6 mb-3 p-3 m-auto",class:{target:"2x1"==t.targetFrame}},[s("img",{staticClass:"frame-horizontal",attrs:{src:"/frame_sample/2_1.png",draggable:"false"},on:{click:function(e){return t.selectFrame("2x1")}}})])])]),s("hr"),t._m(1),s("div",{staticClass:"mb-5 text-center"},[s("div",{staticClass:"row m-0"},[s("div",{staticClass:"col-md-6 mb-3 p-3 m-auto",class:{target:"1x3"==t.targetFrame}},[s("img",{staticClass:"frame-vertical",attrs:{src:"/frame_sample/1_3.png",draggable:"false"},on:{click:function(e){return t.selectFrame("1x3")}}})]),s("div",{staticClass:"col-md-6 mb-3 p-3 m-auto",class:{target:"3x1"==t.targetFrame}},[s("img",{staticClass:"frame-horizontal",attrs:{src:"/frame_sample/3_1.png",draggable:"false"},on:{click:function(e){return t.selectFrame("3x1")}}})])])]),s("hr"),t._m(2),s("div",{staticClass:"mb-5 text-center"},[s("div",{staticClass:"row m-0"},[s("div",{staticClass:"col-md-6 mb-5 p-3 m-auto",class:{target:"1x4"==t.targetFrame}},[s("img",{staticClass:"frame-vertical",attrs:{src:"/frame_sample/1_4.png",draggable:"false"},on:{click:function(e){return t.selectFrame("1x4")}}})]),s("div",{staticClass:"col-md-6 mb-5 p-3 m-auto",class:{target:"2x2"==t.targetFrame}},[s("img",{staticClass:"frame-horizontal",attrs:{src:"/frame_sample/2_2.png",draggable:"false"},on:{click:function(e){return t.selectFrame("2x2")}}})]),s("div",{staticClass:"col-md-6 p-3 m-auto",class:{target:"4x1"==t.targetFrame}},[s("img",{staticClass:"frame-horizontal",attrs:{src:"/frame_sample/4_1.png",draggable:"false"},on:{click:function(e){return t.selectFrame("4x1")}}})])])]),s("hr"),t._m(3),s("div",{staticClass:"mb-5 text-center"},[s("div",{staticClass:"row m-0"},[s("div",{staticClass:"col-mb-6 mb-3 p-3 m-auto",class:{target:"2x3"==t.targetFrame}},[s("img",{staticClass:"frame-vertical",attrs:{src:"/frame_sample/2_3.png",draggable:"false"},on:{click:function(e){return t.selectFrame("2x3")}}})]),s("div",{staticClass:"col-mb-6 mb-3 p-3 m-auto",class:{target:"3x2"==t.targetFrame}},[s("img",{staticClass:"frame-horizontal",attrs:{src:"/frame_sample/3_2.png",draggable:"false"},on:{click:function(e){return t.selectFrame("3x2")}}})])])])])])])},L=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mb-3 pl-3"},[s("strong",[t._v("2 Cuts")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mb-3 pl-3"},[s("strong",[t._v("3 Cuts")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mb-3 pl-3"},[s("strong",[t._v("4 Cuts")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mb-3 pl-3"},[s("strong",[t._v("6 Cuts")])])}],D=(s("ac1f"),s("1276"),{name:"StepOne",data:function(){return{targetFrame:null}},mounted:function(){this.init(),this.targetFrame=this.$store.getters.getFrame,this.targetFrame?this.$store.commit("setNext",!0):this.$store.commit("setNext",!1)},beforeDestroy:function(){this.nextStep()},methods:{selectFrame:function(t){this.targetFrame==t?(this.targetFrame=null,this.$store.commit("setNext",!1),this.$store.commit("setTable",{rows:2,columns:1})):(this.targetFrame=t,this.$store.commit("setNext",!0),this.$store.commit("setTable",{columns:parseInt(t.split("x")[0]),rows:parseInt(t.split("x")[1])}))},nextStep:function(){this.targetFrame&&this.$store.commit("setFrame",this.targetFrame)},init:function(){this.$store.commit("setFrameImg",null),this.$store.commit("setImages",{}),this.$store.commit("setTargets",{}),this.$store.commit("setTmpTargets",{}),this.$store.commit("setImgCanvas",{}),this.$store.commit("setUpdateQueue",[])}}}),B=D,z=(s("20e7"),Object(i["a"])(B,R,L,!1,null,"a1fb6044",null)),U=z.exports,W=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"step-one"},[s("div",[s("div",{staticClass:"mb-3"},[t.isLoading?s("div",{staticStyle:{"font-size":"20px",height:"450px"}},[t._m(0)]):!t.isLoading&&t.canPhoto?s("div",{staticClass:"text-center"},[t.rows<=t.columns?s("div",[s("video",{directives:[{name:"show",rawName:"v-show",value:!t.isPhotoTaken,expression:"!isPhotoTaken"}],ref:"camera",staticClass:"canvas",attrs:{width:600,height:450,autoplay:""}}),s("canvas",{directives:[{name:"show",rawName:"v-show",value:t.isPhotoTaken,expression:"isPhotoTaken"}],ref:"canvas",staticClass:"canvas",attrs:{id:"photoTaken",width:600,height:450}})]):s("div",[s("video",{directives:[{name:"show",rawName:"v-show",value:!t.isPhotoTaken,expression:"!isPhotoTaken"}],ref:"camera",staticClass:"canvas",attrs:{width:450,height:600,autoplay:""}}),s("canvas",{directives:[{name:"show",rawName:"v-show",value:t.isPhotoTaken,expression:"isPhotoTaken"}],ref:"canvas",staticClass:"canvas",attrs:{id:"photoTaken",width:450,height:600}})]),s("div",{staticClass:"mb-3"},[t._v(" ( "+t._s(t.getImageLen)+" / 6 ) ")]),t.getImageLen<6&&!t.isShotPhoto?s("div",{staticClass:"takePic d-flex justify-content-center align-items-center ml-auto mr-auto"},[s("i",{staticClass:"mdi mdi-camera-outline",staticStyle:{"font-size":"30px"},on:{click:t.takePhoto}})]):6==t.getImageLen?s("div",{staticClass:"text-center"},[s("div",{staticClass:"text-center mb-2"},[t._v("다음 단계를 진행해주세요!")]),s("div",[s("button",{staticClass:"btn btn-outline-danger",on:{click:function(e){t.isOpen=!0}}},[t._v("초기화")])])]):s("div",{staticClass:"takePic d-flex justify-content-center align-items-center ml-auto mr-auto"},[s("i",{staticClass:"mdi mdi-camera",staticStyle:{"font-size":"30px"},on:{click:function(e){return t.$Utils.toast("너무 급해요!")}}})])]):s("div",{staticClass:"m-auto",staticStyle:{height:"450px",width:"600px"}},[t.getImageLen?s("div",{staticClass:"m-auto h-100"},[s("div",{staticClass:"h-100",staticStyle:{"box-shadow":"1px 1px 3px black"}},t._l([0,1],(function(e,a){return s("div",{key:a,staticClass:"m-auto row h-50"},t._l([0,1,2],(function(e,r){return s("div",{key:r,staticClass:"col-4 m-auto"},[Object.values(t.images)[3*a+e]?s("div",{staticClass:"card m-auto",staticStyle:{position:"relative"}},[s("img",{staticClass:"uploadImage",attrs:{src:""+Object.values(t.images)[3*a+e]}}),s("div",{staticClass:"overlay"},[s("i",{staticClass:"mdi mdi-close",on:{click:function(s){t.removeImg(Object.keys(t.images)[3*a+e])}}})])]):s("div",{staticClass:"text-center card",on:{click:t.onUploadClick}},[s("i",{staticClass:"mdi mdi-arrow-up-bold",staticStyle:{"font-size":"60px"}}),t._m(2,!0)])])})),0)})),0),s("div",{staticClass:"text-right"},[t._v(" ( "+t._s(t.getImageLen)+" / 6 ) ")]),6==t.getImageLen?s("div",{staticClass:"text-center"},[s("button",{staticClass:"btn btn-outline-danger",on:{click:t.initImage}},[t._v("초기화")])]):t._e()]):s("div",{staticClass:"h-100 card",on:{click:t.onUploadClick}},[t._m(1)]),t.getImageLen<6?s("div",{staticClass:"text-center"},[t._v("카메라가 없다면 가지고 계신 사진을 6장까지 넣어주세요!")]):t._e(),s("input",{ref:"fileInput",staticStyle:{display:"none"},attrs:{type:"file",multiple:""},on:{change:t.onImageUpload}})])])]),t.isOpen?s("modal",{on:{"on-close":function(e){t.isOpen=!1},"on-submit":function(e){t.isOpen=!1,t.initImage()}}}):t._e()],1)},Q=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"text-center"},[s("div",[s("i",{staticClass:"mdi mdi-loading mdi-spin"})]),s("small",[t._v("카메라 설정 중")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"m-auto"},[s("i",{staticClass:"mdi mdi-arrow-up-bold",staticStyle:{"font-size":"70px"}}),s("div",[s("strong",[t._v("사진 올리기")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("strong",[t._v("사진 올리기")])])}],J=s("1da1"),V=s("668b"),H=(s("96cf"),s("d3b7"),s("159b"),s("5319"),s("a630"),s("3ca3"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"modal"}},[s("div",{staticClass:"modal-mask"},[s("div",{staticClass:"modal-wrapper"},[s("div",{staticClass:"modal-container"},[s("div",{staticClass:"modal-header"},[s("div",{staticClass:"row w-100 m-0 p-0"},[s("div",{staticClass:"col-2"}),s("div",{staticClass:"col-8 text-center"},[s("strong",[t._v(t._s(t.title))])]),s("div",{staticClass:"col-2 text-right"},[s("a",{staticClass:"btn btn-sm",attrs:{href:"javascript:;"},on:{click:function(e){return t.$emit("on-close")}}},[s("i",{staticClass:"mdi mdi-close"})])])])]),s("div",{staticClass:"modal-body d-flex justify-content-center align-items-center"},[t._v(" "+t._s(t.msg)+" ")]),s("div",{staticClass:"modal-footer d-block"},[s("div",{staticClass:"row w-100 m-0 p-0"},[s("button",{staticClass:"btn btn-sm btn-block text-secondary col-6",attrs:{type:"button"},on:{click:function(e){return t.$emit("on-close")}}},[s("i",{staticClass:"mdi mdi-check"}),t._v(" 취소 ")]),s("button",{staticClass:"btn btn-sm btn-block text-success col-6",attrs:{type:"button"},on:{click:function(e){return t.$emit("on-submit")}}},[s("i",{staticClass:"mdi mdi-check"}),t._v(" 확인 ")])])])])])])])}),K=[],X={name:"modal",props:{title:{default:"작업 확인 창",type:String},msg:{default:"정말 진행하시겠습니까?",type:String}}},Y=X,G=(s("2273"),Object(i["a"])(Y,H,K,!1,null,"32666d95",null)),q=G.exports,Z={name:"StepOne",components:{Modal:q},data:function(){return{images:{},rows:2,columns:1,boothWidth:null,boothHeight:null,canPhoto:!1,isOpen:!1,isCameraOpen:!1,isPhotoTaken:!1,isShotPhoto:!1,isLoading:!1,isTarget:null}},created:function(){},mounted:function(){var t=this.$store.getters.getFrame;this.rows=t.split("x")[0],this.columns=t.split("x")[1],this.images=this.$store.getters.getImages,6==this.getImageLen?this.$store.commit("setNext",!0):this.$store.commit("setNext",!1),this.createCameraElement()},beforeDestroy:function(){},methods:{createCameraElement:function(){var t=this;this.isLoading=!0;var e=window.constraints={audio:!1,video:!0};navigator.mediaDevices.getUserMedia(e).then((function(e){return t.isLoading=!1,t.canPhoto=!0,e})).then((function(e){t.$refs.camera.srcObject=e})).catch((function(e){t.isLoading=!1,t.canPhoto=!1}))},stopCameraStream:function(){var t=this.$refs.camera.srcObject.getTracks();t.forEach((function(t){t.stop()}))},takePhoto:function(){var t=this;if(!this.isPhotoTaken){this.isShotPhoto=!0;var e=500;setTimeout((function(){t.isShotPhoto=!1}),e);var s=this.$refs.canvas.getContext("2d");this.rows<=this.columns?s.drawImage(this.$refs.camera,0,0,600,450):s.drawImage(this.$refs.camera,0,0,450,600),this.saveImage()}},saveImage:function(){var t=this.$refs.canvas.toDataURL("image/jpeg").replace("image/jpeg","image/octet-stream"),e=(new Date).getTime();this.$set(this.images,e,t),console.log(this.images,"save images")},showingImage:function(){this.$store.commit("setImages",this.images)},initImage:function(){this.$store.commit("setNext",!1),this.$store.commit("setImages",{}),this.$store.commit("setTargets",{}),this.$store.commit("setImgCanvas",{}),this.$store.commit("setTmpTargets",{}),this.$store.commit("setUpdateQueue",[]),this.images={}},removeImg:function(t){this.images[t]=null,this.$delete(this.images,t),this.$store.commit("setImages",this.images)},onUploadClick:function(){this.$refs.fileInput.click()},onImageUpload:function(t){var e=this;return Object(J["a"])(regeneratorRuntime.mark((function s(){var a,r,n,i,c,o,l,m;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!(e.getImageLen>=6)){s.next=2;break}return s.abrupt("return");case 2:a=Array.from(t.target.files),r=!1,n=!1,s.prev=5,c=Object(V["a"])(a);case 7:return s.next=9,c.next();case 9:if(!(r=!(o=s.sent).done)){s.next=24;break}if(l=o.value,m=(new Date).getTime(),!(e.getImageLen>=6)){s.next=14;break}return s.abrupt("break",24);case 14:return s.t0=e,s.t1=e.images,s.t2=m,s.next=19,e.readFile(l);case 19:s.t3=s.sent,s.t0.$set.call(s.t0,s.t1,s.t2,s.t3);case 21:r=!1,s.next=7;break;case 24:s.next=30;break;case 26:s.prev=26,s.t4=s["catch"](5),n=!0,i=s.t4;case 30:if(s.prev=30,s.prev=31,!r||null==c.return){s.next=35;break}return s.next=35,c.return();case 35:if(s.prev=35,!n){s.next=38;break}throw i;case 38:return s.finish(35);case 39:return s.finish(30);case 40:case"end":return s.stop()}}),s,null,[[5,26,30,40],[31,,35,39]])})))()},readFile:function(t){return new Promise((function(e,s){var a=new FileReader;a.onload=function(t){e(t.target.result)},a.readAsDataURL(t)}))}},computed:{getImageLen:function(){return Object.keys(this.images).length}},watch:{images:{deep:!0,handler:function(){6==this.getImageLen&&this.$store.commit("setNext",!0),this.showingImage()}}}},tt=Z,et=(s("18e4"),Object(i["a"])(tt,W,Q,!1,null,"2089185c",null)),st=et.exports,at=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"step-three"},[s("div",{staticClass:"row p-0 m-0 mb-5"},[t.frame?s("basic-frame",{staticClass:"m-auto",attrs:{columns:parseInt(t.frame.split("x")[0]),rows:parseInt(t.frame.split("x")[1])}}):t._e()],1),s("div",{staticClass:"row p-0 m-0 mb-5"},[t._v(" 이미지 리스트 "),s("hr"),s("div",{staticClass:"images w-100"},t._l(t.images,(function(e,a){return s("img",{key:a,class:"mr-3 "+(t.rows<=t.columns?"previewImg-horizontal":"previewImg-vertical"),attrs:{src:e,alt:"",id:""+a,draggable:"false"},on:{click:function(s){return t.selectToClick(e)}}})})),0)])])},rt=[],nt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"basic-frame"},[s("div",{class:"outter-frame outter-frame-"+t.columns+"-"+t.rows},t._l(t.rowCnt,(function(e,a){return s("div",{key:a,class:"row p-0 m-0"},t._l(t.colCnt,(function(e,r){return s("div",{key:r,class:"pl-0 pr-0 inner-frame inner-frame-"+t.columns+"-"+t.rows},[t.images[a*t.colCnt.length+e]?s("div",{class:"inner-frame-"+t.columns+"-"+t.rows},[s("img",{attrs:{src:t.images[a*t.colCnt.length+e],id:"canvas-"+(a*t.colCnt.length+e),draggable:"false"}}),s("div",{staticClass:"overlay",on:{click:function(s){return t.removeImg(a*t.colCnt.length+e)}}},[s("i",{staticClass:"mdi mdi-close"})])]):s("div",{class:"inner-frame-"+t.columns+"-"+t.rows},[s("canvas",{attrs:{id:"canvas-"+(a*t.colCnt.length+e)}})])])})),0)})),0)])},it=[],ct=(s("a9e3"),{name:"basicFrame",props:{rows:{default:2,type:Number},columns:{default:1,type:Number}},data:function(){return{rowCnt:[],colCnt:[],images:{}}},created:function(){},mounted:function(){this.images=this.$store.getters.getTargets,this.rowCnt=Array.from({length:this.$props.rows},(function(t,e){return e+1})),this.colCnt=Array.from({length:this.$props.columns},(function(t,e){return e+1}))},methods:{removeImg:function(t){this.images[t]=null,this.$delete(this.images,t),this.$store.commit("setTargets",this.images),this.$store.commit("setTmpTargets",this.images),this.$store.commit("setRemoveQueue",t),this.images=this.$store.getters.getTargets,Object.keys(this.$store.getters.getTargets).length!=this.rows*this.columns&&this.$store.commit("setNext",!1)}}}),ot=ct,lt=(s("e097"),Object(i["a"])(ot,nt,it,!1,null,"16405978",null)),mt=lt.exports,ut={name:"StepThree",components:{basicFrame:mt},data:function(){return{rows:2,columns:1,width:500,images:{},selectTarget:{},frame:null}},created:function(){},mounted:function(){var t=this.$store.getters.getFrame;this.rows=t.split("x")[0],this.columns=t.split("x")[1],Object.keys(this.$store.getters.getTargets).length==this.rows*this.columns?this.$store.commit("setNext",!0):this.$store.commit("setNext",!1),this.images=this.$store.getters.getImages,this.frame=this.$store.getters.getFrame},destroyed:function(){},methods:{selectToClick:function(t){this.selectTarget=this.$store.getters.getTargets;var e=this.frame.split("x");if(Object.keys(this.selectTarget).length!=parseInt(e[0])*parseInt(e[1])){var s=Object.keys(this.selectTarget).length;if(this.$store.getters.getRemoveQueueCnt){var a=this.$store.getters.getRemoveQueues,r=a.shift();this.$store.commit("setUpdateQueue",a),this.$store.commit("setTarget",[r,t]),this.$store.commit("setTmpTarget",[r,t])}else this.$store.commit("setTarget",[s+1,t]),this.$store.commit("setTmpTarget",[s+1,t]);this.selectTarget=this.$store.getters.getTargets,console.log(Object.keys(this.$store.getters.getTargets).length,this.rows*this.columns),Object.keys(this.$store.getters.getTargets).length==this.rows*this.columns?this.$store.commit("setNext",!0):this.$store.commit("setNext",!1)}else console.log("이미 모두 골랐어요.")}}},ft=ut,gt=(s("7e8c"),Object(i["a"])(ft,at,rt,!1,null,"6e07317f",null)),dt=gt.exports,vt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"step-four"},[s("div",{staticClass:"text-center mb-3"},[s("button",{staticClass:"btn btn-outline-primary mr-2",on:{click:t.saveWork}},[t._v("저장")]),s("button",{staticClass:"btn btn-outline-primary mr-2",on:{click:function(e){t.isWork=!t.isWork,t.setWorkMode()}}},[t._v(t._s(t.isWork?"수정":"관전"))]),s("button",{staticClass:"btn btn-outline-primary",on:{click:function(e){t.isOpen=!0}}},[t._v("미리보기")])]),s("div",{staticClass:"row m-0 p-0 mb-5"},[s("div",{staticClass:"col-md-8 m-auto"},[s("div",{staticClass:"mb-3 d-flex justify-content-center"},[s("div",{ref:"pic",class:"outter-frame-"+parseInt(t.frame.split("x")[0])+"-"+parseInt(t.frame.split("x")[1]),staticStyle:{position:"absolute",padding:"20px","padding-right":"0px"}},t._l(t.rowCnt,(function(e,a){return s("div",{key:a,class:"row p-0 m-0"},t._l(t.colCnt,(function(e,r){return s("div",{key:r,class:"pl-0 pr-0 inner-frame inner-frame-"+t.columns+"-"+t.rows},[s("div",{class:"inner-frame-"+t.columns+"-"+t.rows},[s("img",{attrs:{src:t.images[a*t.colCnt.length+e],id:"canvas-"+(a*t.colCnt.length+e),draggable:"false"}})])])})),0)})),0),s("div",{ref:"deco"},[t.frame?s("canvas",{ref:"canvas",class:"outter-frame outter-frame-"+parseInt(t.frame.split("x")[0])+"-"+parseInt(t.frame.split("x")[1])}):t._e()])]),t._m(0)]),s("div",{staticClass:"col-md-4"},[s("span",{on:{click:function(e){t.isMode="bg"}}},[t._v("배경색")]),t._v(" | "),s("span",{on:{click:function(e){t.isMode="sticker"}}},[t._v("스티커")]),s("hr"),"bg"==t.isMode?s("div",{staticStyle:{height:"400px","overflow-y":"auto"}},t._l(t.bg,(function(e,a){return s("div",{key:a},[s("div",{staticClass:"mb-3"},[s("strong",[t._v(t._s(a)+" 테마")])]),s("div",{staticClass:"row m-0 p-0 mb-3"},t._l(e,(function(e,a){return s("div",{key:a,staticClass:"col-2 m-0 p-0 pt-1 pb-1",class:{target:t.targetColor==e}},[s("div",{staticClass:"bg m-auto",style:{"background-color":e},on:{click:function(s){return t.selectBg(e)}}})])})),0)])})),0):"sticker"==t.isMode?s("div",{staticStyle:{height:"450px","overflow-y":"auto"}},[s("div",{staticClass:"mb-5"},[s("button",{staticClass:"btn mr-3",class:{"btn-primary":t.isText,"btn-outline-primary":!t.isText},on:{click:function(e){t.isText=!t.isText}}},[t._v("텍스트")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.fontSize,expression:"fontSize"}],attrs:{type:"number"},domProps:{value:t.fontSize},on:{input:function(e){e.target.composing||(t.fontSize=e.target.value)}}})]),s("div",t._l(t.sticker,(function(e,a){return s("div",{key:a},[s("div",{staticClass:"mb-3"},[s("strong",[t._v(t._s(a)+" 테마")])]),s("div",{staticClass:"row m-0 p-0 mb-5"},t._l(e,(function(e,r){return s("div",{key:r,staticClass:"col-3 mb-3 text-center",class:{target:t.targetSticker==a+"_"+e},attrs:{id:a+"_"+e},on:{click:function(s){t.isSticker=!t.isSticker,t.selectSticker(a+"_"+e)}}},[s("img",{ref:a+"_"+e,refInFor:!0,staticClass:"sticker",attrs:{src:"/stickers/"+a+"_"+e+".png"}})])})),0)])})),0)]):t._e()])]),t.isOpen?s("preview-modal",{attrs:{columns:parseInt(t.frame.split("x")[0]),rows:parseInt(t.frame.split("x")[1])},on:{"on-close":function(e){t.isOpen=!1}}}):t._e()],1)},ht=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"text-center"},[s("small",[t._v("실제 효과들은 사진 뒤에 표시됩니다. "),s("br"),t._v(" 미리보기 모드를 통해 확인할 수 있습니다.")])])}],pt=(s("caad"),s("e9c4"),s("4de4"),s("d81d"),s("2532"),s("7a94")),bt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"modal"}},[s("div",{staticClass:"modal-mask"},[s("div",{staticClass:"modal-wrapper"},[s("div",{staticClass:"modal-container"},[s("div",{staticClass:"modal-header"},[s("div",{staticClass:"row w-100 m-0 p-0"},[s("div",{staticClass:"col-2"}),s("div",{staticClass:"col-8 text-center"},[s("strong",[t._v("프레임 꾸미기 미리보기")])]),s("div",{staticClass:"col-2 text-right"},[s("a",{staticClass:"btn btn-sm",attrs:{href:"javascript:;"},on:{click:function(e){return t.$emit("on-close")}}},[s("i",{staticClass:"mdi mdi-close"})])])])]),s("div",{staticClass:"modal-body d-flex justify-content-center"},[s("preview-frame",{attrs:{rows:t.rows,columns:t.columns}})],1),s("div",{staticClass:"modal-footer d-block"},[s("button",{staticClass:"btn btn-sm btn-block text-success",attrs:{type:"button"},on:{click:function(e){return t.$emit("on-close")}}},[s("i",{staticClass:"mdi mdi-check"}),t._v(" 확인 ")])])])])])])},Ct=[],wt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"preview-frame"},[s("div",{ref:"frame",class:"outter-frame outter-frame-"+t.columns+"-"+t.rows},t._l(t.rowCnt,(function(e,a){return s("div",{key:a,class:"row p-0 m-0"},t._l(t.colCnt,(function(e,r){return s("div",{key:r,class:"pl-0 pr-0 inner-frame inner-frame-"+t.columns+"-"+t.rows},[s("div",{class:"inner-frame-"+t.columns+"-"+t.rows},[t.images[a*t.colCnt.length+e]?s("div",{class:"inner-frame-"+t.columns+"-"+t.rows},[s("img",{attrs:{src:t.images[a*t.colCnt.length+e],id:"canvas-"+(a*t.colCnt.length+e),draggable:"false"}})]):s("div",{class:"inner-frame-"+t.columns+"-"+t.rows},[s("canvas",{attrs:{id:"canvas-"+(a*t.colCnt.length+e)}})])])])})),0)})),0)])},kt=[],xt={name:"previewFrame",props:{rows:{default:2,type:Number},columns:{default:1,type:Number}},data:function(){return{frameImg:null,rowCnt:[],colCnt:[],images:{}}},created:function(){},mounted:function(){this.$store.getters.getFrameImg&&(this.frameImg=this.$store.getters.getFrameImg,this.$refs.frame.style.backgroundImage="url(".concat(this.frameImg,")")),this.images=this.$store.getters.getTargets;for(var t=1;t<=this.$props.rows;t++)this.rowCnt.push(t);for(var e=1;e<=this.$props.columns;e++)this.colCnt.push(e)}},_t=xt,$t=(s("54c6"),Object(i["a"])(_t,wt,kt,!1,null,"4cfeb0b9",null)),yt=$t.exports,It={name:"previewModal",components:{previewFrame:yt},props:{rows:{default:2,type:Number},columns:{default:1,type:Number}}},Ft=It,Tt=(s("0365"),Object(i["a"])(Ft,bt,Ct,!1,null,"49301e11",null)),Ot=Tt.exports,St={name:"stepFour",components:{previewModal:Ot,previewFrame:yt},data:function(){return{rows:2,columns:1,rowCnt:[],colCnt:[],images:{},targetSticker:null,targetColor:"#00ff0000",frame:null,isMode:"bg",isWork:!1,isOpen:!1,isText:!1,isSticker:!1,canvasHeight:null,canvasWidth:null,canvas:null,fontSize:16,sticker:{cute_handdrawn:[],cute_natural_doodle:[],flower_leaf:[]},bg:{simple:["#F2F2F3","#A6A6A6","#595959","#262626","#0D0D0D"],modern:["#131B26","#D9B95B","#D9C484","#F2ECE4","#D97D5B"],warm:["#D9C077","#F29F05","#D97904","#BF4904","#F2F2F2"],astro:["#F25E7A","#4A2B8C","#5155A6","#05F2DB","#F2E963"],cartoon:["#636AF2","#41A0F2","#A2DCF2","#04D98B","#F2E205"],ancient:["#1D5948","#F2BF5E","#A6864B","#F2D091","#732509"]}}},created:function(){this.frame=this.$store.getters.getFrame},mounted:function(){this.init(),window.addEventListener("keydown",this.setKeydownEvent)},beforeDestroy:function(){this.saveWork()},destroyed:function(){window.removeEventListener("keydown",this.setKeydownEvent)},methods:{init:function(){var t=this;return Object(J["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s=t.$store.getters.getTable,t.images=t.$store.getters.getTargets,t.rows=s.rows,t.columns=s.columns,t.rowCnt=Array.from({length:s.rows},(function(t,e){return e+1})),t.colCnt=Array.from({length:s.columns},(function(t,e){return e+1})),t.sticker.cute_handdrawn=Array.from({length:6},(function(t,e){return e+1})),t.sticker.cute_natural_doodle=Array.from({length:12},(function(t,e){return e+1})),t.sticker.flower_leaf=Array.from({length:38},(function(t,e){return e+1})),t.canvasHeight=t.$refs.canvas.clientHeight,t.canvasWidth=t.$refs.canvas.clientWidth,t.canvas=new pt["fabric"].Canvas(t.$refs.canvas),t.canvas.setHeight(t.canvasHeight),t.canvas.setWidth(t.canvasWidth),!t.$store.getters.getCanvas){e.next=21;break}return e.next=17,t.loadCanvasToJSON();case 17:t.setCanvasOption(),console.log(t.canvas.backgroundColor,"load"),t.targetColor=t.canvas.backgroundColor,t.canvas.renderAll();case 21:t.setMouseEvent(),t.setWorkMode();case 23:case"end":return e.stop()}}),e)})))()},loadCanvasToJSON:function(){var t=this;return new Promise((function(e,s){t.canvas.loadFromJSON(t.$store.getters.getCanvas,t.canvas.renderAll.bind(t.canvas)),e()}))},setMouseEvent:function(){var t=this;this.canvas.on("mouse:down",(function(e){t.isWork&&(t.isText?t.createObj("text",e.pointer.x,e.pointer.y):t.isSticker?t.createObj("sticker",e.pointer.x,e.pointer.y):e.target&&(e.target.opacity=.5,t.canvas.renderAll()))})).on("mouse:up",(function(e){e.target&&(e.target.opacity=1,t.canvas.renderAll())})).on("selection:created",(function(e){e.selected.length>1&&t.canvas.discardActiveObject().renderAll()}))},setKeydownEvent:function(t){var e=[" ","DELETE"],s=t.key.toUpperCase();if(!e.includes(s))return!1;if("DELETE"==s){var a=this.canvas.getActiveObject();this.canvas.remove(a),this.canvas.renderAll()}},createObj:function(t,e,s){if("text"==t){var a=new pt["fabric"].Textbox("내용을 입력하세요.",{left:e,top:s,width:150,fontSize:this.fontSize,textAlign:"left",id:"textBox_".concat((new Date).getDate())});this.canvas.add(a),this.canvas.renderAll(),this.setTextEvent(a),this.isText=!1}else if("sticker"==t){var r=new pt["fabric"].Image(this.$refs[this.targetSticker][0],{left:e,top:s});this.canvas.add(r),this.canvas.renderAll(),this.isSticker=!1}},saveWork:function(){this.isWork=!1,this.targetSticker=null,this.selectBg(this.targetColor),this.setWorkMode(),this.$store.commit("setCanvas",JSON.stringify(this.canvas.toObject(["id"]))),this.$store.commit("setFrameImg",this.canvas.toDataURL({format:"image/png"}))},setTextEvent:function(t){var e=this;t.setControlsVisibility({mt:!1,mb:!1,bl:!1,br:!1,tl:!1,tr:!1}),t.on("selected",(function(t){e.canvas.renderAll()})),t.on("editing:entered",(function(t){var s=e.canvas.getActiveObject();"내용을 입력하세요."==s.text&&(s.selectAll(),s.removeChars())})),t.on("changed",(function(){var s=t.scaleX*t.width,a=e.canvas.getActiveObject().__lineWidths.filter((function(t){return t}))[0]?e.canvas.getActiveObject().__lineWidths.filter((function(t){return t}))[0]:1,r=(a+15)*t.scaleX;e.canvas.getActiveObject().set("width",r),t.left+s>=e.canvas.width-10&&t.set("width",e.canvas.width-left-10),e.canvas.renderAll()})),t.on("modified",(function(){e.canvas.renderAll()}))},setCanvasOption:function(){var t=this;this.canvas.getObjects().map((function(e){e.id.includes("textBox")&&t.setTextEvent(e)}))},selectSticker:function(t){this.targetSticker==t?this.targetSticker=null:this.targetSticker=t},setWorkMode:function(){this.canvas.discardActiveObject().renderAll(),this.isWork?(this.$refs.pic.style["z-index"]=1,this.$refs.deco.style["z-index"]=2):(this.$refs.pic.style["z-index"]=2,this.$refs.deco.style["z-index"]=1)},selectBg:function(t){this.targetColor=t,this.canvas.backgroundColor=t,this.canvas.renderAll()}}},jt=St,Et=(s("d58e"),Object(i["a"])(jt,vt,ht,!1,null,"2fdcbcc2",null)),At=Et.exports,Nt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"step-five"},[s("div",{staticClass:"text-center mb-3"},[s("button",{staticClass:"btn btn-outline-primary mr-2",on:{click:t.saveWork}},[t._v("저장")]),s("button",{staticClass:"btn btn-outline-primary",on:{click:function(e){t.isOpen=!0}}},[t._v("미리보기")])]),s("div",{staticClass:"row m-0 p-0"},[s("div",{staticClass:"col-8"},[s("div",{staticClass:"d-flex justify-content-center align-items-center"},[t.rows<=t.columns?s("canvas",{ref:"canvas",class:"decoImg",attrs:{width:600,height:450}}):t._e(),s("canvas",{ref:"canvas",class:"decoImg",attrs:{width:450,height:600}})]),s("div",{staticClass:"text-center"},[s("span",{on:{click:t.prevImg}},[s("i",{staticClass:"mdi mdi-arrow-left-bold",staticStyle:{"font-size":"50px"}})]),s("span",{staticStyle:{"font-size":"25px"}},[t._v(t._s(t.currImg)+" / "+t._s(Object.keys(t.images).length))]),s("span",{on:{click:t.nextImg}},[s("i",{staticClass:"mdi mdi-arrow-right-bold",staticStyle:{"font-size":"50px"}})])])]),s("div",{staticClass:"col-4"},[s("span",{on:{click:function(e){t.isMode="filter"}}},[t._v("필터")]),t._v(" | "),s("span",{on:{click:function(e){t.isMode="sticker"}}},[t._v("스티커")]),t._v(" | "),s("span",{on:{click:function(e){t.isMode="draw"}}},[t._v("그리기")]),s("hr"),"filter"==t.isMode?s("div",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.filterVal,expression:"filterVal"}],attrs:{type:"range",min:"0.0",max:"1.0",step:"0.01"},domProps:{value:t.filterVal},on:{__r:function(e){t.filterVal=e.target.value}}}),t.images[t.currImg]?s("div",{staticClass:"row",staticStyle:{height:"450px","overflow-y":"auto"}},t._l(t.filters,(function(e,a){return s("div",{key:a,staticClass:"col-5 text-center mr-auto ml-auto mb-3 card",class:{target:t.targetFilter==a},on:{click:function(e){return t.selectFilter(a)}}},[s("img",{staticClass:"pt-1 mb-2 m-auto",class:t.rows<=t.columns?"filterImg-horizontal":"filterImg-vertical"}),s("div",[t._v(t._s(a))])])})),0):t._e()]):"sticker"==t.isMode?s("div",{staticStyle:{height:"450px","overflow-y":"auto"}},t._l(t.sticker,(function(e,a){return s("div",{key:a},[s("div",{staticClass:"mb-3"},[s("strong",[t._v(t._s(a)+" 테마")])]),s("div",{staticClass:"row m-0 p-0 mb-5"},t._l(e,(function(e,r){return s("div",{key:r,staticClass:"col-3 mb-3 text-center",class:{target:t.targetSticker==a+"_"+e},attrs:{id:a+"_"+e},on:{click:function(s){t.isSticker=!t.isSticker,t.selectSticker(a+"_"+e)}}},[s("img",{ref:a+"_"+e,refInFor:!0,staticClass:"sticker",attrs:{src:"/stickers/"+a+"_"+e+".png"}})])})),0)])})),0):t._e()])]),t.isOpen?s("preview-modal",{attrs:{columns:parseInt(t.frame.split("x")[0]),rows:parseInt(t.frame.split("x")[1])},on:{"on-close":function(e){t.isOpen=!1}}}):t._e()],1)},Pt=[],Mt={name:"stepFive",components:{previewModal:Ot,previewFrame:yt},data:function(){return{currImg:1,frame:null,rows:2,columns:1,images:{},isMode:"filter",isOpen:!1,isSticker:!1,targetFilter:"normal",targetSticker:null,sticker:{cute_handdrawn:[],cute_natural_doodle:[],flower_leaf:[]},filters:{normal:null,grayscale:null,invert:null,sepia:null,brownie:null,brightness:null,contrast:null,saturation:null,vibrance:null,vintage:null,pixelate:null,blur:null},filterVal:.5}},created:function(){this.frame=this.$store.getters.getFrame},mounted:function(){var t=this.$store.getters.getFrame;this.rows=t.split("x")[0],this.columns=t.split("x")[1],this.init(),window.addEventListener("keydown",this.setKeydownEvent)},destroyed:function(){window.removeEventListener("keydown",this.setKeydownEvent)},methods:{init:function(){var t=this;return Object(J["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.images=t.$store.getters.getTargets,t.sticker.cute_handdrawn=Array.from({length:6},(function(t,e){return e+1})),t.sticker.cute_natural_doodle=Array.from({length:12},(function(t,e){return e+1})),t.sticker.flower_leaf=Array.from({length:38},(function(t,e){return e+1})),t.canvas=new pt["fabric"].Canvas(t.$refs.canvas),e.next=7,t.loadImgCanvas();case 7:t.setFilterObj(),t.setMouseEvent();case 9:case"end":return e.stop()}}),e)})))()},setFilterObj:function(){this.$set(this.filters,"normal",null),this.$set(this.filters,"grayscale",new pt["fabric"].Image.filters.Grayscale({grayscale:.5})),this.$set(this.filters,"invert",new pt["fabric"].Image.filters.Invert({invert:1})),this.$set(this.filters,"sepia",new pt["fabric"].Image.filters.Sepia({sepia:.5})),this.$set(this.filters,"brownie",new pt["fabric"].Image.filters.Brownie({brownie:.5})),this.$set(this.filters,"brightness",new pt["fabric"].Image.filters.Brightness({brightness:.5})),this.$set(this.filters,"contrast",new pt["fabric"].Image.filters.Contrast({contrast:.5})),this.$set(this.filters,"saturation",new pt["fabric"].Image.filters.Saturation({saturation:.5})),this.$set(this.filters,"vibrance",new pt["fabric"].Image.filters.Vibrance({vibrance:.5})),this.$set(this.filters,"vintage",new pt["fabric"].Image.filters.Vintage({vintage:.5})),this.$set(this.filters,"pixelate",new pt["fabric"].Image.filters.Pixelate({pixelate:.5})),this.$set(this.filters,"blur",new pt["fabric"].Image.filters.Blur({blur:.1}))},saveWork:function(){this.canvas.discardActiveObject().renderAll(),this.$store.commit("setTarget",[this.currImg,this.canvas.toDataURL()]),this.$store.commit("setImgCanvas",[this.currImg,JSON.stringify(this.canvas.toObject(["id"]))])},setMouseEvent:function(){var t=this;this.canvas.on("mouse:down",(function(e){t.isSticker?t.createObj("sticker",e.pointer.x,e.pointer.y):e.target&&(e.target.opacity=.5,t.canvas.renderAll())})).on("mouse:up",(function(e){e.target&&(e.target.opacity=1,t.canvas.renderAll())})).on("selection:created",(function(e){e.selected.length>1&&t.canvas.discardActiveObject().renderAll()}))},setKeydownEvent:function(t){var e=[" ","DELETE"],s=t.key.toUpperCase();if(!e.includes(s))return!1;if("DELETE"==s){var a=this.canvas.getActiveObject();this.canvas.remove(a),this.canvas.renderAll()}},prevImg:function(){var t=this;return Object(J["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(1!=t.currImg){e.next=2;break}return e.abrupt("return");case 2:return t.currImg-=1,e.next=5,t.loadImgCanvas();case 5:case"end":return e.stop()}}),e)})))()},nextImg:function(){var t=this;return Object(J["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.currImg!=Object.keys(t.images).length){e.next=2;break}return e.abrupt("return");case 2:return t.currImg+=1,e.next=5,t.loadImgCanvas();case 5:case"end":return e.stop()}}),e)})))()},loadImgCanvas:function(){var t=this;return Object(J["a"])(regeneratorRuntime.mark((function e(){var s,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.$store.getters.getImgCanvas(t.currImg)){e.next=8;break}return s=t.$store.getters.getImgCanvas(t.currImg),e.next=4,t.loadCanvasToJSON(s);case 4:a=t.canvas.backgroundImage,a.filters.length?t.targetFilter=a.filters[0].type.toLowerCase():t.targetFilter="normal",e.next=15;break;case 8:return e.next=10,t.loadImgFromBase64(t.$store.getters.getTmpTarget(t.currImg));case 10:r=e.sent,t.canvas.setBackgroundImage(r,t.canvas.renderAll.bind(t.canvas),{scaleX:t.canvas.width/r.width,scaleY:t.canvas.height/r.height}),t.canvas.backgroundColor="#FFFFFF",t.canvas.renderAll(),t.$store.commit("setImgCanvas",[t.currImg,JSON.stringify(t.canvas.toObject(["id"]))]);case 15:case"end":return e.stop()}}),e)})))()},loadCanvasToJSON:function(t){var e=this;return new Promise((function(s,a){e.canvas.loadFromJSON(t,(function(){e.canvas.renderAll.bind(e.canvas),s(!0)}))}))},loadImgFromBase64:function(t){return new Promise((function(e,s){pt["fabric"].Image.fromURL(t,(function(t){e(t)}))}))},createObj:function(t,e,s){if("sticker"==t){var a=new pt["fabric"].Image(this.$refs[this.targetSticker][0],{left:e,top:s});this.canvas.add(a),this.canvas.renderAll(),this.isSticker=!1}},selectSticker:function(t){this.targetSticker==t?this.targetSticker=null:this.targetSticker=t},selectFilter:function(t){var e=this;return Object(J["a"])(regeneratorRuntime.mark((function s(){var a,r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(e.targetFilter!=t&&"normal"!=t){s.next=8;break}return e.targetFilter="normal",s.next=4,e.loadImgFromBase64(e.$store.getters.getTmpTarget(e.currImg));case 4:a=s.sent,e.canvas.setBackgroundImage(a,e.canvas.renderAll.bind(e.canvas),{scaleX:e.canvas.width/a.width,scaleY:e.canvas.height/a.height}),s.next=15;break;case 8:return e.targetFilter=t,s.next=11,e.loadImgFromBase64(e.images[e.currImg]);case 11:r=s.sent,r.filters=[e.filters[e.targetFilter]],r.applyFilters(),e.canvas.setBackgroundImage(r,e.canvas.renderAll.bind(e.canvas),{scaleX:e.canvas.width/r.width,scaleY:e.canvas.height/r.height});case 15:e.$store.commit("setImgCanvas",[e.currImg,JSON.stringify(e.canvas.toObject(["id"]))]);case 16:case"end":return s.stop()}}),s)})))()},applyFilterVal:function(){},initImg:function(t){var e=this;return Object(J["a"])(regeneratorRuntime.mark((function s(){var a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return e.$set(e.images,t,e.$store.getters.getTmpTarget(t)),e.canvas.getObjects().forEach((function(t){e.canvas.remove(t)})),s.next=4,e.loadImgFromBase64(e.images[e.currImg]);case 4:a=s.sent,e.canvas.setBackgroundImage(a,e.canvas.renderAll.bind(e.canvas),{scaleX:e.canvas.width/a.width,scaleY:e.canvas.height/a.height}),e.saveWork();case 7:case"end":return s.stop()}}),s)})))()}}},Rt=Mt,Lt=(s("4ce1"),Object(i["a"])(Rt,Nt,Pt,!1,null,"6272a64c",null)),Dt=Lt.exports,Bt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"step-result"},[s("div",{staticClass:"text-center"},[s("button",{staticClass:"btn btn-outline-primary mr-3",on:{click:t.saveResult}},[t._v("저 장 하 기")]),s("button",{staticClass:"btn btn-outline-primary",on:{click:function(e){return t.$router.push("/")}}},[t._v("다 시 하 기")])]),s("div",{staticClass:"mb-5"},[s("div",{ref:"result",class:"m-auto outter-frame outter-frame-"+t.columns+"-"+t.rows},[s("result-frame",{attrs:{rows:t.rows,columns:t.columns}})],1)])])},zt=[],Ut=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:"result-frame outter-frame-"+t.columns+"-"+t.rows},[s("div",{ref:"frame",class:"outter-frame outter-frame-"+t.columns+"-"+t.rows},t._l(t.rowCnt,(function(e,a){return s("div",{key:a,class:"row p-0 m-0"},t._l(t.colCnt,(function(e,r){return s("div",{key:r,class:"pl-0 pr-0 inner-frame inner-frame-"+t.columns+"-"+t.rows},[s("div",{class:"inner-frame-"+t.columns+"-"+t.rows},[s("div",{class:"inner-frame-"+t.columns+"-"+t.rows},[s("img",{attrs:{src:t.images[a*t.colCnt.length+e],id:"canvas-"+(a*t.colCnt.length+e),draggable:"false"}})])])])})),0)})),0)])},Wt=[],Qt={name:"resultFrame",props:{rows:{default:2,type:Number},columns:{default:1,type:Number}},data:function(){return{frameImg:null,canvas:null,rowCnt:[],colCnt:[],images:{}}},created:function(){},mounted:function(){this.$store.getters.getFrameImg&&(this.frameImg=this.$store.getters.getFrameImg,this.$refs.frame.style.backgroundImage="url(".concat(this.frameImg,")")),this.images=this.$store.getters.getTargets;for(var t=1;t<=this.$props.rows;t++)this.rowCnt.push(t);for(var e=1;e<=this.$props.columns;e++)this.colCnt.push(e)},methods:{}},Jt=Qt,Vt=(s("5ef4"),Object(i["a"])(Jt,Ut,Wt,!1,null,"219ee745",null)),Ht=Vt.exports,Kt=s("c0e9"),Xt=s.n(Kt),Yt={name:"step-result",components:{resultFrame:Ht},data:function(){return{rows:2,columns:1}},created:function(){var t=this.$store.getters.getTable;this.rows=t.rows,this.columns=t.columns},methods:{saveResult:function(){var t=this;return Object(J["a"])(regeneratorRuntime.mark((function e(){var s,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Xt()(t.$refs.result);case 2:s=e.sent,s.style.backgroundColor="#FFFFFF",console.log(s.style.backgroundColor),a=document.createElement("a"),a.href=s.toDataURL(),a.download="Image.png",a.click();case 9:case"end":return e.stop()}}),e)})))()}}},Gt=Yt,qt=(s("ad91"),Object(i["a"])(Gt,Bt,zt,!1,null,"45938cde",null)),Zt=qt.exports,te={name:"PickMem",components:{navBar:S,footerBar:M,stepOne:U,stepTwo:st,stepThree:dt,stepFour:At,stepFive:Dt,stepResult:Zt},data:function(){return{step:0,msg:["액자를 골라보세요!","가장 멋있고 예쁘게 찍어보세요","어렵겠지만 몇 개만 골라주세요","마음가는 대로 액자를 꾸며봐요!","이번에는 사진을 꾸며볼까요","마음에 드시나요?"]}},methods:{nextStep:function(){console.log(this.$Utils.toast());var t=this.$store.getters.getNext;console.log(this.$store.getters.getNext,"nav",this.step),console.log(this.$store.getters.getImages,"nav"),0!=this.step||t?1!=this.step||t?2!=this.step||t?5!=this.step&&t&&(1==this.step&&Object.keys(this.$store.getters.getImages).length<6||(this.step+=1)):this.$Utils.toast("사진을 모두 골라주세요."):this.$Utils.toast("사진이 부족합니다."):this.$Utils.toast("액자를 골라주세요.")},previousStep:function(){0==this.step&&this.$router.push("/"),this.step-=1}}},ee=te,se=(s("e811"),Object(i["a"])(ee,_,$,!1,null,"f4c03ca0",null)),ae=se.exports;a["a"].use(m["a"]);var re=[{path:"/",name:"Home",component:x},{path:"/pickMem",name:"PickMem",component:ae,beforeEnter:function(t,e,s){console.log(t,e,"to, from"),s()}}],ne=new m["a"]({mode:"history",base:"../pickMem/",routes:re}),ie=ne,ce=s("2f62");a["a"].use(ce["a"]);var oe=new ce["a"].Store({state:{canNext:!1,rows:2,columns:1,frameCanvas:null,frameImg:null,frame:null,imgCanvas:{},images:{},selectTarget:{},tmpTarget:{},removeQueue:[]},mutations:{setNext:function(t,e){t.canNext=e},setImages:function(t,e){t.images=e},setImgCanvas:function(t,e){a["a"].set(t.imgCanvas,e[0],e[1])},setTarget:function(t,e){a["a"].set(t.selectTarget,e[0],e[1])},setTmpTarget:function(t,e){a["a"].set(t.tmpTarget,e[0],e[1])},setTargets:function(t,e){t.selectTarget=e},setTmpTargets:function(t,e){t.tmpTarget=e},setRemoveQueue:function(t,e){t.removeQueue.push(e)},setUpdateQueue:function(t,e){t.removeQueue=e},setFrame:function(t,e){t.frame=e},setCanvas:function(t,e){t.frameCanvas=e},setFrameImg:function(t,e){t.frameImg=e},setTable:function(t,e){t.rows=e.rows,t.columns=e.columns}},getters:{getNext:function(t){return t.canNext},getImages:function(t){return t.images},getTargets:function(t){return t.selectTarget},getRemoveQueues:function(t){return t.removeQueue},getRemoveQueueCnt:function(t){return t.removeQueue.length},getFrame:function(t){return t.frame},getCanvas:function(t){return t.frameCanvas},getFrameImg:function(t){return t.frameImg},getTable:function(t){return{rows:t.rows,columns:t.columns}},getTmpTargets:function(t){return t.tmpTarget},getTmpTarget:function(t){return function(e){return t.tmpTarget[e]}},getImgCanvas:function(t){return function(e){return t.imgCanvas[e]}}},actions:{},modules:{}}),le=s("a65d"),me=s.n(le);function ue(t){a["a"].toasted.clear(),a["a"].toasted.show(t,{theme:"bubble",position:"bottom-center",duration:3e3,type:"error",singleton:!0})}a["a"].use(me.a);var fe={toast:ue},ge={install:function(t){t.prototype.$Utils=fe}};a["a"].config.productionTip=!1,a["a"].use(ge),new a["a"]({router:ie,store:oe,render:function(t){return t(l)}}).$mount("#app")},"5c0b":function(t,e,s){"use strict";s("9c0c")},"5ef4":function(t,e,s){"use strict";s("dc39")},7692:function(t,e,s){},"7e8c":function(t,e,s){"use strict";s("7ecc")},"7ecc":function(t,e,s){},"8b11":function(t,e,s){},"95a7":function(t,e,s){"use strict";s("9852")},9852:function(t,e,s){},"9c0c":function(t,e,s){},a1d1:function(t,e,s){},a273:function(t,e,s){},ad91:function(t,e,s){"use strict";s("1ff5")},b308:function(t,e,s){"use strict";s("8b11")},d414:function(t,e,s){},d506:function(t,e,s){},d58e:function(t,e,s){"use strict";s("f4d5")},dc39:function(t,e,s){},dd3d:function(t,e,s){"use strict";s("d506")},e097:function(t,e,s){"use strict";s("a1d1")},e811:function(t,e,s){"use strict";s("0e4a")},f4d5:function(t,e,s){}});
//# sourceMappingURL=app.09d6cf96.js.map